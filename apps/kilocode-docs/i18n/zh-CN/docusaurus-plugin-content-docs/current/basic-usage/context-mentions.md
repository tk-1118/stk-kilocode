# 上下文提及

上下文提及是一种强大的方式，可以为 HN Code 提供项目的具体信息，使其能够更准确高效地执行任务。你可以使用提及来引用文件、文件夹、问题和 Git 提交。上下文提及以 `@` 符号开头。

<img src="/docs/img/context-mentions/context-mentions.png" alt="上下文提及概览 - 显示聊天界面中的 @ 符号下拉菜单" width="600" />

_上下文提及概览，显示聊天界面中的 @ 符号下拉菜单。_

## 提及类型

<img src="/docs/img/context-mentions/context-mentions-1.png" alt="文件提及示例，显示使用 @ 引用文件及其内容出现在对话中" width="600" />

_文件提及将实际代码内容添加到对话中，以便直接引用和分析。_

| 提及类型     | 格式                   | 描述                            | 示例用法                           |
| ------------ | ---------------------- | ------------------------------- | ---------------------------------- |
| **文件**     | `@/path/to/file.ts`    | 将文件内容包含在请求上下文中    | "解释 @/src/utils.ts 中的函数"     |
| **文件夹**   | `@/path/to/folder/`    | 以树状格式提供目录结构          | "@/src/components/ 中有哪些文件？" |
| **问题**     | `@problems`            | 包含 VS Code 问题面板的诊断信息 | "@problems 修复我代码中的所有错误" |
| **终端**     | `@terminal`            | 包含最近的终端命令和输出        | "修复 @terminal 中显示的错误"      |
| **Git 提交** | `@a1b2c3d`             | 通过哈希引用特定提交            | "提交 @a1b2c3d 中有什么变化？"     |
| **Git 更改** | `@git-changes`         | 显示未提交的更改                | "为 @git-changes 建议一条提交消息" |
| **URL**      | `@https://example.com` | 导入网站内容                    | "总结 @https://docusaurus.io/"     |

### 文件提及

<img src="/docs/img/context-mentions/context-mentions-1.png" alt="文件提及示例，显示使用 @ 引用文件及其内容出现在对话中" width="600" />

_文件提及结合行号引用源代码，以便精确定位。_

| 功能         | 详情                                                  |
| ------------ | ----------------------------------------------------- |
| **格式**     | `@/path/to/file.ts`（始终从工作区根目录开始使用 `/`） |
| **提供**     | 包含行号的完整文件内容                                |
| **支持**     | 文本文件、PDF 和 DOCX 文件（带文本提取）              |
| **适用场景** | 初始请求、反馈响应和后续消息                          |
| **限制**     | 非常大的文件可能会被截断；不支持二进制文件            |

### 文件夹提及

<img src="/docs/img/context-mentions/context-mentions-2.png" alt="文件夹提及示例，显示目录内容在聊天中被引用" width="600" />

_文件夹提及以可读的树状格式显示目录结构。_

| 功能         | 详情                                  |
| ------------ | ------------------------------------- |
| **格式**     | `@/path/to/folder/`（注意尾部的斜杠） |
| **提供**     | 使用 ├── 和 └── 前缀的分层树状显示    |
| **包含**     | 直接子文件和目录（非递归）            |
| **最佳用途** | 了解项目结构                          |
| **提示**     | 结合文件提及检查特定文件内容          |

### 问题提及

<img src="/docs/img/context-mentions/context-mentions-3.png" alt="问题提及示例，显示使用 @problems 引用 VS Code 问题面板" width="600" />

_问题提及直接从 VS Code 的问题面板导入诊断信息。_

| 功能         | 详情                               |
| ------------ | ---------------------------------- |
| **格式**     | `@problems`                        |
| **提供**     | VS Code 问题面板中的所有错误和警告 |
| **包含**     | 文件路径、行号和诊断信息           |
| **分组**     | 问题按文件组织以提高清晰度         |
| **最佳用途** | 修复错误而无需手动复制             |

### 终端提及

<img src="/docs/img/context-mentions/context-mentions-4.png" alt="终端提及示例，显示终端输出被包含在 HN Code 的上下文中" width="600" />

_终端提及捕获最近的命令输出以便调试和分析。_

| 功能         | 详情                       |
| ------------ | -------------------------- |
| **格式**     | `@terminal`                |
| **捕获**     | 最后一条命令及其完整输出   |
| **保留**     | 终端状态（不会清除终端）   |
| **限制**     | 仅限于可见的终端缓冲区内容 |
| **最佳用途** | 调试构建错误或分析命令输出 |

### Git 提及

<img src="/docs/img/context-mentions/context-mentions-5.png" alt="Git 提交提及示例，显示提交详情被 HN Code 分析" width="600" />

_Git 提及提供提交详情和差异，以便进行上下文感知的版本分析。_

| 类型           | 格式           | 提供                                | 限制              |
| -------------- | -------------- | ----------------------------------- | ----------------- |
| **提交**       | `@a1b2c3d`     | 提交消息、作者、日期和完整差异      | 仅适用于 Git 仓库 |
| **工作区更改** | `@git-changes` | `git status` 输出和未提交更改的差异 | 仅适用于 Git 仓库 |

### URL 提及

<img src="/docs/img/context-mentions/context-mentions-6.png" alt="URL 提及示例，显示网站内容被转换为 Markdown 格式出现在聊天中" width="600" />

_URL 提及导入外部网页内容并将其转换为可读的 Markdown 格式。_

| 功能     | 详情                               |
| -------- | ---------------------------------- |
| **格式** | `@https://example.com`             |
| **处理** | 使用无头浏览器获取内容             |
| **清理** | 移除脚本、样式和导航元素           |
| **输出** | 将内容转换为 Markdown 以提高可读性 |
| **限制** | 复杂页面可能无法完美转换           |

## 如何使用提及

1. 在聊天输入框中输入 `@` 以触发建议下拉菜单
2. 继续输入以过滤建议，或使用箭头键导航
3. 按回车键或鼠标点击选择
4. 在请求中组合多个提及："修复 @/src/component.ts 中的 @problems"

下拉菜单会自动建议：

- 最近打开的文件
- 可见的文件夹
- 最近的 Git 提交
- 特殊关键字（`problems`、`terminal`、`git-changes`）

## 最佳实践

| 实践             | 描述                                                                    |
| ---------------- | ----------------------------------------------------------------------- |
| **使用具体路径** | 引用确切文件而非描述它们                                                |
| **使用相对路径** | 始终从工作区根目录开始：`@/src/file.ts` 而非 `@C:/Projects/src/file.ts` |
| **验证引用**     | 确保路径和提交哈希正确                                                  |
| **点击提及**     | 点击聊天历史中的提及以打开文件或查看内容                                |
| **避免复制粘贴** | 使用提及而非手动复制代码或错误信息                                      |
| **组合提及**     | "使用提交 @a1b2c3d 中的模式修复 @/src/component.ts 中的 @problems"      |
