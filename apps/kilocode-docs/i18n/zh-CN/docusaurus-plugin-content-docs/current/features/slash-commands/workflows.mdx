---
title: "工作流"
sidebarTitle: "工作流"
---

Workflows 通过为 HN Code 定义分步指令来自动化重复性任务。通过在聊天中键入 `/[workflow-name.md]` 来调用任何工作流。

<img src="/docs/img/slash-commands/workflows.png" alt="HN Code 中的工作流选项卡" width="600" />

## 创建工作流

工作流是存储在 `.kilocode/workflows/` 中的 markdown 文件：
- **全局工作流**：`~/.kilocode/workflows/`（在所有项目中可用）
- **项目工作流**：`[project]/.kilocode/workflows/`（项目特定）

### 基本设置

1.  创建一个包含分步指令的 `.md` 文件
2.  将其保存在您的工作流目录中
3.  键入 `/filename.md` 执行

### 工作流功能

工作流可以利用：
- [内置工具](/features/tools/tool-use-overview)：[`read_file()`](/features/tools/read-file)、[`search_files()`](/features/tools/search-files)、[`execute_command()`](/features/tools/execute-command)
- CLI 工具：`gh`、`docker`、`npm`、自定义脚本
- [MCP 集成](/features/mcp/overview)：Slack、数据库、API
- [模式切换](/basic-usage/using-modes)：[`new_task()`](/features/tools/new-task) 用于专业上下文

## 常见工作流模式

**发布管理**
```markdown
1. 收集自上次发布以来合并的 PR
2. 从提交消息生成更新日志
3. 更新版本号
4. 创建发布分支和标签
5. 部署到 staging 环境
```

**项目设置**
```markdown
1. 克隆仓库模板
2. 安装依赖项（`npm install`、`pip install -r requirements.txt`）
3. 配置环境文件
4. 初始化数据库/服务
5. 运行初始测试
```

**代码审查准备**
```markdown
1. 搜索 TODO 注释和 debug 语句
2. 运行 linting 和格式化
3. 执行测试套件
4. 从最近的提交生成 PR 描述
```

## 示例：PR 提交工作流

让我们逐步创建一个用于提交拉取请求的工作流。此工作流处理从代码审查到部署通知的整个过程。

在您的 `.kilocode/workflows` 目录中创建一个名为 `submit-pr.md` 的文件：

```markdown
# 提交 PR 工作流

您正在帮助提交拉取请求。请按照以下步骤操作：

1. 首先，使用 `search_files` 检查是否有任何不应提交的 TODO 注释或 console.log 语句
2. 使用 `execute_command` 运行测试，使用 `npm test` 或适当的测试命令
3. 如果测试通过，则暂存并提交更改，并附上描述性提交消息
4. 使用 `gh pr create` 推送分支并创建拉取请求
5. 使用 `ask_followup_question` 从用户那里获取 PR 标题和描述

所需参数（如果未提供则询问）：
- 分支名称
- 要分配的审阅者
```

现在您可以通过在聊天中键入 `/submit-pr.md` 来触发此工作流。HN Code 将：

- 在提交之前扫描您的代码以查找常见问题
- 运行您的测试套件以尽早发现问题
- 处理 Git 操作和 PR 创建
- 自动通知您的团队
- 设置部署的后续任务

这使您无需手动运行相同的 7 步过程，每次您想提交代码进行审查时。
